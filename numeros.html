<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Rentabilidade - SCOD Solutions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Chosen Palette: SCOD (Primary: #D9006C, Secondary: #F7931E, Text: #58595B) -->
    <!-- Application Structure Plan: SPA com navegação por âncoras (#home, #diagnostico, #cenarios, #solucoes). A estrutura guia o usuário desde os KPIs de alto nível, passando pelo problema central (distorção da média), explorando o impacto financeiro de soluções (simulador de piso) e terminando com um plano de ação tático (abas de solução). Escolhido por ser um fluxo lógico de descoberta e resolução. -->
    <!-- Visualization & Content Choices: 1. KPIs (KPIs.csv): Cartões de estatística (HTML/Tailwind) para visão geral rápida. 2. Média Simples vs. Ponderada (KPIs.csv): Gráfico de barras (Chart.js) para destacar a disparidade central. 3. Clientes Problemáticos (Top_20_Baixo_Unit.csv): Tabela (HTML) para identificar os detratores. 4. Cenários de Piso (Cenarios_Piso.csv): Botões interativos (JS) + Cartões de display para simulação de impacto. 5. Plano de Ação (nte.pdf): Abas (JS/HTML) para organizar soluções complexas de forma clara. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        :root {
            --color-primary: #D9006C;
            --color-secondary: #F7931E;
            --color-text: #333;
            --color-text-light: #58595B;
        }
        body {
            font-family: 'Inter', sans-serif;
            color: var(--color-text-light);
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            color: var(--color-text);
        }
        .scod-primary { color: var(--color-primary); }
        .bg-scod-primary { background-color: var(--color-primary); }
        .border-scod-primary { border-color: var(--color-primary); }
        
        .scod-secondary { color: var(--color-secondary); }
        .bg-scod-secondary { background-color: var(--color-secondary); }

        .chart-container {
            position: relative;
            height: 300px;
            max-height: 300px;
            width: 100%;
            max-width: 500px;
            margin: auto;
        }

        .tab-btn {
            @apply px-4 py-3 text-sm md:text-base font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 focus:outline-none;
        }
        .tab-btn.active {
            @apply border-scod-primary text-scod-primary;
        }

        .scenario-btn {
            @apply px-6 py-3 text-lg font-bold text-gray-700 bg-white border-2 border-gray-300 rounded-lg shadow-sm hover:border-scod-primary hover:text-scod-primary focus:outline-none transition-all;
        }
        .scenario-btn.active {
            @apply bg-scod-primary text-white border-scod-primary;
        }

        .kpi-card {
            @apply bg-white p-6 rounded-lg shadow-lg text-center transition-all hover:shadow-2xl;
        }
        .kpi-value {
            @apply text-4xl lg:text-5xl font-extrabold scod-primary mb-2;
        }
        .kpi-label {
            @apply text-base font-semibold text-gray-500 uppercase;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'poppins': ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        scod: {
                            primary: '#D9006C',
                            secondary: '#F7931E',
                            text: '#333333',
                            'text-light': '#58595B',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 md:px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold scod-primary">SCOD</div>
            <div class="hidden md:flex space-x-6">
                <a href="#home" class="font-medium text-gray-600 hover:text-scod-primary transition">Visão Geral</a>
                <a href="#diagnostico" class="font-medium text-gray-600 hover:text-scod-primary transition">Diagnóstico</a>
                <a href="#cenarios" class="font-medium text-gray-600 hover:text-scod-primary transition">Cenários</a>
                <a href="#solucoes" class="font-medium text-gray-600 hover:text-scod-primary transition">Plano de Ação</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-btn" class="text-gray-600 focus:outline-none">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden bg-white shadow-lg">
            <a href="#home" class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-scod-primary">Visão Geral</a>
            <a href="#diagnostico" class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-scod-primary">Diagnóstico</a>
            <a href="#cenarios" class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-scod-primary">Cenários</a>
            <a href="#solucoes" class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-scod-primary">Plano de Ação</a>
        </div>
    </header>

    <main class="container mx-auto px-4 md:px-6 pt-8">

        <section id="home" class="py-16 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Análise Estratégica de Rentabilidade</h1>
            <p class="text-xl text-gray-600 mb-12 max-w-3xl mx-auto">Uma visão geral dos indicadores-chave da base de clientes ativos (79 linhas) e a saúde financeira da receita.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="kpi-card lg:col-span-3">
                    <div class="kpi-value">R$ 104.614,58</div>
                    <div class="kpi-label">Receita Mensal Total</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">174.540</div>
                    <div class="kpi-label">Unidades Equiv./Mês</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value scod-secondary">R$ 1,17</div>
                    <div class="kpi-label">Média Simples (R$/Unid.)</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">R$ 0,60</div>
                    <div class="kpi-label">Média Ponderada (R$/Unid.)</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value text-gray-700">79</div>
                    <div class="kpi-label">Clientes Ativos</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value text-gray-700">R$ 0,99</div>
                    <div class="kpi-label">Mediana (R$/Unid.)</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value text-gray-700">49%</div>
                    <div class="kpi-label">Distorção (Simples vs. Pond.)</div>
                </div>
            </div>
        </section>

        <section id="diagnostico" class="py-16 bg-white rounded-lg shadow-xl my-16 p-8 md:p-12">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">O Diagnóstico: Onde Está o Problema?</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-16">
                <div>
                    <h3 class="text-2xl font-bold mb-4">O Desafio da Média: Ponderada vs. Simples</h3>
                    <p class="text-lg mb-4">Nossa métrica mais importante, a Média Ponderada (receita real por unidade), é <strong class="scod-primary">49% menor</strong> que a Média Simples. </p>
                    <p class="text-lg"><strong>Conclusão:</strong> Clientes com maior volume de unidades pagam valores muito abaixo da média, distorcendo a receita e pressionando a rentabilidade para baixo.</p>
                </div>
                <div class="chart-container">
                    <canvas id="averageChart"></canvas>
                </div>
            </div>

            <hr class="my-16 border-gray-200">

            <div>
                <h3 class="text-2xl font-bold mb-6 text-center">Quem Puxa a Média Para Baixo? (Amostra do Q20)</h3>
                <p class="text-lg text-center mb-8 max-w-3xl mx-auto">Estes são os clientes com o menor Valor Unitário Normalizado. Eles concentram alto volume e, em muitos casos, alta frequência de custo (mensal), representando o maior dreno na rentabilidade.</p>
                <div class="overflow-x-auto shadow-md rounded-lg">
                    <table class="w-full min-w-max text-left bg-white">
                        <thead class="bg-gray-800 text-white uppercase text-sm">
                            <tr>
                                <th class="p-4">Cliente</th>
                                <th class="p-4">Valor Unit. Normalizado</th>
                                <th class="p-4">Unid. Equiv./Mês</th>
                                <th class="p-4">Faturamento (R$)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50">
                                <td class="p-4 font-medium">BSP Empreendimentos</td>
                                <td class="p-4 font-bold scod-primary">R$ 0,15</td>
                                <td class="p-4">8.469</td>
                                <td class="p-4">R$ 1.311,00</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="p-4 font-medium">MRV</td>
                                <td class="p-4 font-bold scod-primary">R$ 0,25</td>
                                <td class="p-4">40.000</td>
                                <td class="p-4">R$ 10.000,00</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="p-4 font-medium">CBRE Consultoria</td>
                                <td class="p-4 font-bold scod-primary">R$ 0,26</td>
                                <td class="p-4">4.500</td>
                                <td class="p-4">R$ 1.181,73</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="p-4 font-medium">Abrahao E Tognetti</td>
                                <td class="p-4 font-bold scod-primary">R$ 0,32</td>
                                <td class="p-4">500</td>
                                <td class="p-4">R$ 158,84</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="p-4 font-medium">Emais Urbanismo</td>
                                <td class="p-4 font-bold scod-primary">R$ 0,38</td>
                                <td class="p-4">19.348</td>
                                <td class="p-4">R$ 7.267,08</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="cenarios" class="py-16 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-6">Simulação de Impacto: Definindo um Piso</h2>
            <p class="text-xl text-gray-600 mb-12 max-w-3xl mx-auto">Veja o impacto financeiro imediato ao estabelecer um valor unitário mínimo para os clientes que hoje estão abaixo dele.</p>
            
            <div class="flex justify-center space-x-4 mb-12">
                <button class="scenario-btn active" data-piso="0.80">Piso R$ 0,80</button>
                <button class="scenario-btn" data-piso="1.00">Piso R$ 1,00</button>
                <button class="scenario-btn" data-piso="1.20">Piso R$ 1,20</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                <div class="kpi-card bg-green-50">
                    <div id="receita-adicional-display" class="kpi-value text-green-600">--</div>
                    <div class="kpi-label">Receita Adicional / Mês</div>
                </div>
                <div class="kpi-card bg-blue-50">
                    <div id="nova-receita-display" class="kpi-value text-blue-600">--</div>
                    <div class="kpi-label">Nova Receita Total / Mês</div>
                </div>
            </div>
        </section>

        <section id="solucoes" class="py-16 my-16">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Plano de Ação Estratégico</h2>
            
            <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-xl p-8 md:p-12">
                <div class="border-b border-gray-200 mb-8">
                    <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                        <button class="tab-btn active" data-tab="politica">A. Política de Preço</button>
                        <button class="tab-btn" data-tab="reequilibrio">B. Reequilíbrio</button>
                        <button class="tab-btn" data-tab="escopo">C. Revisão de Escopo</button>
                        <button class="tab-btn" data-tab="operacao">D. Operação</button>
                        <button class="tab-btn" data-tab="governanca">E. Governança</button>
                    </nav>
                </div>

                <div>
                    <div id="politica" class="tab-panel">
                        <h3 class="text-2xl font-bold mb-6">A. Política de Preço</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex items-start"><i class="fas fa-gavel text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Piso por Unidade:</strong> Definir piso (ex: R$ 0,80) para novos contratos e meta de R$ 1,00-R$ 1,20 em 24 meses.</span></li>
                            <li class="flex items-start"><i class="fas fa-hand-holding-dollar text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Mínimo Mensal:</strong> Instituir valor mínimo por cliente (ex: R$ 500,00) para cobrir custos fixos de operação e suporte.</span></li>
                            <li class="flex items-start"><i class="fas fa-stream text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Tabela de Tiers:</strong> Criar política de faixas (descontos por volume) clara, sem exceções manuais.</span></li>
                        </ul>
                    </div>
                    <div id="reequilibrio" class="tab-panel hidden">
                        <h3 class="text-2xl font-bold mb-6">B. Reequilíbrio de Contratos</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex items-start"><i class="fas fa-arrow-trend-up text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Ação no Q20 (Piores 20%):</strong> Rodada de reajuste imediata (clientes &le; R$ 0,658), usando dados de volumetria e SLAs como argumento.</span></li>
                            <li class="flex items-start"><i class="fas fa-calendar-check text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Reajuste Anual Automático:</strong> Incluir cláusula contratual de reajuste (IPCA + fator de produtividade) em todas as renovações.</span></li>
                            <li class="flex items-start"><i class="fas fa-hourglass-half text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Descontos com Validade:</strong> Atrelar descontos a condições objetivas (volume, adimplência, prazo) e com data de expiração.</span></li>
                        </ul>
                    </div>
                    <div id="escopo" class="tab-panel hidden">
                        <h3 class="text-2xl font-bold mb-6">C. Revisão de Escopo</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex items-start"><i class="fas fa-clock text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Preço por Frequência:</strong> O preço deve refletir o custo operacional (Diário > Semanal > Mensal).</span></li>
                            <li class="flex items-start"><i class="fas fa-shield-alt text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Custo de Captura (Captcha/Proxy):</strong> Implementar co-participação (adicional técnico ou franquia) para clientes de alto custo.</span></li>
                            <li class="flex items-start"><i class="fas fa-puzzle-piece text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Preço por Módulo:</strong> Diferenciar valores para módulos distintos (IPTU, Contas, Taxas) com base no custo de manutenção.</span></li>
                        </ul>
                    </div>
                    <div id="operacao" class="tab-panel hidden">
                        <h3 class="text-2xl font-bold mb-6">D. Operação e Cobrança</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex items-start"><i class="fas fa-file-invoice-dollar text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Régua de Cobrança:</strong> Implementar multas/juros automáticos e *lock* leve em *features* não críticas por atraso.</span></li>
                            <li class="flex items-start"><i class="fas fa-pause-circle text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Revisão de "Pausas":</strong> Substituir o status "Em pausa" por suspensão de faturamento com gatilhos objetivos e prazo definido.</span></li>
                        </ul>
                    </div>
                    <div id="governanca" class="tab-panel hidden">
                        <h3 class="text-2xl font-bold mb-6">E. Governança</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex items-start"><i class="fas fa-chart-line text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Controle Mensal (Dashboard):</strong> Implantar controle de unitário médio por cliente e alertas de desvio.</span></li>
                            <li class="flex items-start"><i class="fas fa-server text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Monitorar Custos Variáveis:</strong> Se custo (Captcha/Proxy) de um cliente ultrapassar a franquia (ex: >10% da receita), tarifar extra.</span></li>
                            <li class="flex items-start"><i class="fas fa-exclamation-triangle text-scod-primary w-6 pt-1"></i><span class="flex-1"><strong>Alertas de Risco:</strong> Criar alertas quando um novo contrato for fechado abaixo do piso ou um desconto for aplicado sem validade.</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center p-8 bg-gray-800 text-gray-400 mt-16">
        <p>&copy; 2024 SCOD Solutions. Análise interna de rentabilidade.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            initAverageChart();
            initScenarios();
            initTabs();
            initMobileMenu();

        });

        function initAverageChart() {
            const ctx = document.getElementById('averageChart');
            if (!ctx) return;
            
            new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Média Simples', 'Média Ponderada'],
                    datasets: [{
                        label: 'Valor Unitário (R$)',
                        data: [1.17, 0.60],
                        backgroundColor: [
                            '#F7931E',
                            '#D9006C'
                        ],
                        borderColor: [
                            '#F7931E',
                            '#D9006C'
                        ],
                        borderWidth: 1,
                        barPercentage: 0.6,
                        categoryPercentage: 0.7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'R$ ' + value.toFixed(2);
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'R$ 'Z + context.raw.toFixed(2);
                                }
                            }
                        }
                    }
                }
            });
        }

        function initScenarios() {
            const scenarioData = {
                "0.80": { adicional: 54190.31, clientes: 27 },
                "1.00": { adicional: 82445.07, clientes: 40 },
                "1.20": { adicional: 112622.86, clientes: 46 }
            };
            const receitaAtual = 104614.58;
            const btns = document.querySelectorAll('.scenario-btn');
            const adicionalDisplay = document.getElementById('receita-adicional-display');
            const novaReceitaDisplay = document.getElementById('nova-receita-display');

            function formatCurrency(value) {
                return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            }

            function updateDisplay(piso) {
                const data = scenarioData[piso];
                if (!data) return;

                const novaReceita = receitaAtual + data.adicional;
                
                adicionalDisplay.innerText = formatCurrency(data.adicional);
                novaReceitaDisplay.innerText = formatCurrency(novaReceita);

                btns.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.piso === piso);
                });
            }

            btns.forEach(btn => {
                btn.addEventListener('click', () => {
                    updateDisplay(btn.dataset.piso);
                });
            });

            updateDisplay("0.80");
        }

        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabPanels = document.querySelectorAll('.tab-panel');

            tabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;

                    tabButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    tabPanels.forEach(panel => {
                        panel.classList.toggle('hidden', panel.id !== tabId);
                    });
                });
            });
        }
        
        function initMobileMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            
            if (btn && menu) {
                btn.addEventListener('click', () => {
                    menu.classList.toggle('hidden');
                });
                
                menu.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        menu.classList.add('hidden');
                    });
                });
            }
        }

    </script>
</body>
</html>
